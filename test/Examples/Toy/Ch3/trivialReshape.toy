# RUN: toyc-ch3 %s -emit=mlir 2>&1 | FileCheck %s
# RUN: toyc-ch3 %s -emit=mlir -opt 2>&1 | FileCheck %s --check-prefix=OPT

# We expect no reshape in this function with optimizations enabled

def main() {
  var a<2,1> = [1, 2];
  var b<2,1> = a;
  var c<2,1> = b;
  print(c);
}


# without optimizations, match the reshape
#CHECK-LABEL: main
#CHECK: reshape

# with optimizations, ensure no reshape
#OPT-LABEL: main
#OPT-NOT: reshape
